var D=Object.defineProperty;var H=(o,e,t)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var f=(o,e,t)=>(H(o,typeof e!="symbol"?e+"":e,t),t);import{a as L,b as $,I as O,p as h,e as m,G as w,i as T,j as E,g as p,F as N,D as S,h as M,B as J,C as K}from"./index.ec891db5.js";import R from"./Texter.08478dc6.js";import C from"./Click.85cfc62e.js";import{N as B,a as F}from"./NifePanel.ed34d63d.js";import"./label.1ae4d31b.js";const k=o=>String(o).replace(/~\[(.*?)\]/g,(e,t,i,u)=>`<span style="color:green;font-weight:bold;">${t}</span>`).replace(/~\{(.*?)\}/g,(e,t,i,u)=>`<span style="color:red">${t}</span>`),I=class{constructor(e,t){f(this,"nife1");f(this,"nife2");f(this,"logs",[]);f(this,"winner",null);if(!e||!t)throw"\u6218\u6597\u4EBA\u6570\u4E0D\u8DB3";this.nife1=e,this.nife2=t}start(){const e=this.logs;e.splice(0,e.length),this.winner=null,this.isDraw=!1;let{name:t,hp:i,atk:u,def:_}=this.nife1,{name:c,hp:a,atk:x,def:y}=this.nife2;for(;i>0&&a>0;){let s=u-y,l=x-_;s=s<0?0:s,l=l<0?0:l,i-=l,a-=s,e.push(k(`~[[${t}]] \u653B\u51FB ~[[${c}]]\uFF0C\u9020\u6210~{${s}}\u4F24\u5BB3\uFF0C~[[${c}]]\u5269\u4F59\u8840\u91CF~{${a}}`)),e.push(k(`~[[${c}]] \u653B\u51FB ~[[${t}]]\uFF0C\u9020\u6210~{${l}}\u4F24\u5BB3\uFF0C~[[${t}]]\u5269\u4F59\u8840\u91CF~{${i}}`))}let r,d,n;i<=0&&a<=0?(e.push(k(`~[[${t}]]\u3001~[[${c}]]\u53CC\u65B9\u540C\u65F6\u9635\u4EA1\uFF0C\u5E73\u624B`)),r=I.sDraw):(i<=0&&(r=this.nife2,d=this.nife1,n=a),a<=0&&(r=this.nife1,d=this.nife2,n=i),e.push(""),e.push(k(`~[[${d.name}]]\u5148\u9635\u4EA1\uFF0C~[[${r.name}]]\u80DC\u5229\uFF0C\u5269\u4F59\u8840\u91CF ~{${n} (${Math.round(100*n/r.hpMax)}%)}`))),this.winner=r}};let b=I;f(b,"sDraw",Symbol("\u5E73\u624B"));const v=o=>(J("data-v-57394b2a"),o=o(),K(),o),j=v(()=>p("br",null,null,-1)),G=v(()=>p("div",null,"\u25CF nifes",-1)),P=v(()=>p("div",null,"\u25CF fighter",-1)),U=v(()=>p("br",null,null,-1)),q=v(()=>p("br",null,null,-1)),z=["innerHTML"],A={setup(o){const e=[],t=()=>localStorage.setItem("nife-names",JSON.stringify(e)),i=$([]),u=$(""),_=async n=>{i.value.push(new B(n)),u.value="",t(e.push(n))},c=()=>{i.value=[],t(e.splice(0,e.length))};O(()=>{const n=localStorage.getItem("nife-names");n?e.push(...JSON.parse(n)):(e.push("\u5C3C\u7984"),e.push("\u857E\u59C6"),e.push("\u53EF\u53EF\u841D"),t()),e.forEach(s=>i.value.push(new B(s)))});const a=$([]),x=n=>{a.value.length<2&&a.value.push(n)},y=n=>{const s=a.value.indexOf(n);s>-1&&a.value.splice(s,1)},r=$([]),d=()=>{const n=new b(a.value[0],a.value[1]);n.start(),r.value.splice(0,r.value.length),r.value.push("--------------\u65B0\u7684\u6218\u6597--------------"),r.value.push(...n.logs)};return(n,s)=>(h(),m("module",null,[w(R,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),"name-new":"",align:"center",label:"\u540D",onKeyup:s[1]||(s[1]=T(E(l=>_(u.value),["exact"]),["enter"]))},null,8,["modelValue"]),w(C,{button:"",text:"\u52A0\u5165",onClick:s[2]||(s[2]=l=>_(u.value))}),w(C,{button:"",text:"\u6E05\u7A7A",onClick:c}),j,p("p-box",null,[G,(h(!0),m(N,null,S(i.value,(l,g)=>(h(),M(F,{key:`nife-${g}`,nife:l,onClick:V=>x(l)},null,8,["nife","onClick"]))),128)),P,(h(!0),m(N,null,S(a.value,(l,g)=>(h(),M(F,{key:`nife-fight-${g}`,nife:l,onClick:V=>y(l)},null,8,["nife","onClick"]))),128)),U,w(C,{button:"",text:"\u5F00\u59CB",onClick:d}),q,p("p-logs",null,[(h(!0),m(N,null,S(r.value,(l,g)=>(h(),m("p-log",{key:`nife-fight-log-${g}`,innerHTML:l},null,8,z))),128))])])]))}};var te=L(A,[["__scopeId","data-v-57394b2a"]]);export{te as default};
